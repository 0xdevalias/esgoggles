<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <script src="jquery.js"></script>
    <script src="esprima.js"></script>
    <script src="estraverse.js"></script>
    <script src="almond.js"></script>
	<script>
	define('estraverse', estraverse);
	</script>
    <script src="escope.js"></script>
    <script src="Benchmark.js"></script>
    <script src="findVariables.js"></script>
    <script src="markFunctionCalls.js"></script>
    <script src="Ui_HighlightVariableReferences.js"></script>
    <script src="ast$.js"></script>
    <script src="raw_openwebglobe.js"></script>
	<link rel='stylesheet' href='reset.css'/>
	<link rel='stylesheet' href='uml.css'/>
	<link rel='stylesheet' href='style2.css'/>
</head>
<body>
<script>



;(function() {
	var raw = raw_openwebglobe.toString().replace(/^function raw_openwebglobe\(\)\{|\}$/g,''),
		benchmark = new Benchmark(),
		ast,
		$ast

	benchmark
		.time('ast', function() {
			ast = esprima.parse(raw, {
				range: true,
				loc: false,
				comment: true,
				tolerant: false
			})
		})
		.time('ast$', function() {
			$ast = ast$(raw, ast)
		})
		.time('findVariables', function() {
			findVariables($ast)
		})
		.report()

	//markConsoleCallsForRemoval($ast)
	//markFunctionCalls($ast, 'highlighted', ['log'])

	initUi_HighlightVariableReferences($ast)

	$ast.appendTo('body')
})();

$('<hr/>').appendTo('body');

</script>
</body>
</html>
